# WFLY Music iOS App

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π iOS –∫–ª–∏–µ–Ω—Ç –¥–ª—è WFLY Music, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥ server.js API.

## ‚ú® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üé® –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫
- **–¢–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫** –ø–æ —Ç—Ä–µ–∫–∞–º –∏ –∞—Ä—Ç–∏—Å—Ç–∞–º
- **–§–∏–ª—å—Ç—Ä –ø–æ –∂–∞–Ω—Ä—É** (hip-hop, pop, rock, jazz, electronic, classical, blues, reggae, country)
- **–ü–æ–∏—Å–∫ –∞–ª—å–±–æ–º–æ–≤** —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–æ–≤—ã–º endpoint `/api/search?q=...&genre=...&artistId=...`

### üé§ –ü—Ä–æ—Ñ–∏–ª–∏ –∞—Ä—Ç–∏—Å—Ç–æ–≤
- **–ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è –∞—Ä—Ç–∏—Å—Ç–∞** —Å –∫—Ä–∞—Å–∏–≤—ã–º –¥–∏–∑–∞–π–Ω–æ–º:
  - –ë–∞–Ω–Ω–µ—Ä –≤–æ –≤–µ—Å—å —ç–∫—Ä–∞–Ω –≤–≤–µ—Ä—Ö—É
  - –ö—Ä—É–≥–ª–∞—è –∞–≤–∞—Ç–∞—Ä–∫–∞, –Ω–∞–ª–æ–∂–µ–Ω–Ω–∞—è –Ω–∞ –±–∞–Ω–Ω–µ—Ä —Å–Ω–∏–∑—É
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞—Ä—Ç–∏—Å—Ç–µ (–∏–º—è, –æ–ø–∏—Å–∞–Ω–∏–µ)
  - –°–ø–∏—Å–æ–∫ –∞–ª—å–±–æ–º–æ–≤ (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞)
  - –°–ø–∏—Å–æ–∫ —Ç—Ä–µ–∫–æ–≤
- **–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –∞—Ä—Ç–∏—Å—Ç–æ–≤**:
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–µ–∫–æ–≤ –∏ –∞–ª—å–±–æ–º–æ–≤)
  - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (–∏–º—è, –æ–ø–∏—Å–∞–Ω–∏–µ, –±–∞–Ω–Ω–µ—Ä, –∞–≤–∞—Ç–∞—Ä)
  - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### üéµ –ê–ª—å–±–æ–º—ã
- **–ü—Ä–æ—Å–º–æ—Ç—Ä –∞–ª—å–±–æ–º–æ–≤** —Å –æ–±–ª–æ–∂–∫–∞–º–∏
- **–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–ª—å–±–æ–º–∞** —Å–æ —Å–ø–∏—Å–∫–æ–º —Ç—Ä–µ–∫–æ–≤
- –ö–∞—Ä—Ç–æ—á–∫–∏ –∞–ª—å–±–æ–º–æ–≤ –≤ –ø—Ä–æ—Ñ–∏–ª–µ –∞—Ä—Ç–∏—Å—Ç–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `/api/albums/:id` –∏ `/api/artists/:id/profile`

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∞—Ä—Ç–∏—Å—Ç–æ–≤
- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∞—Ä—Ç–∏—Å—Ç–∞** (username, password, –∏–º—è, –æ–ø–∏—Å–∞–Ω–∏–µ)
- **–í—Ö–æ–¥ –∞—Ä—Ç–∏—Å—Ç–∞** —á–µ—Ä–µ–∑ username/password
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∞—Ä—Ç–∏—Å—Ç–æ–≤
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–∏–ø–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ –≤ Keychain

## üì± –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –í–∫–ª–∞–¥–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
1. **–ì–ª–∞–≤–Ω–∞—è** - —Å–µ–∫—Ü–∏–∏ —Å –Ω–æ–≤—ã–º–∏ —Ç—Ä–µ–∫–∞–º–∏
2. **–ü–æ–∏—Å–∫** - —É–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
3. **–ú–æ—è –º—É–∑—ã–∫–∞** - –ø–ª–µ–π–ª–∏—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ –∏ –≤—ã—Ö–æ–¥

### –í–∫–ª–∞–¥–∫–∏ –¥–ª—è –∞—Ä—Ç–∏—Å—Ç–æ–≤:
1. **–ì–ª–∞–≤–Ω–∞—è** - —Å–µ–∫—Ü–∏–∏ —Å –Ω–æ–≤—ã–º–∏ —Ç—Ä–µ–∫–∞–º–∏
2. **–ü–æ–∏—Å–∫** - —É–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
3. **–ü—Ä–æ—Ñ–∏–ª—å** - –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—Ä—Ç–∏—Å—Ç–∞
4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ –∏ –≤—ã—Ö–æ–¥

## üé® –î–∏–∑–∞–π–Ω

### –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π UI
- –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏ (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π + —Å–∏–Ω–∏–π)
- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–≤–µ–∑–¥–Ω—ã–π —Ñ–æ–Ω
- –ù–µ–±—É–ª–æ–≤—ã–π –≤–∏—Ö—Ä—å –Ω–∞ —Ñ–æ–Ω–µ
- –°—Ç–µ–∫–ª—è–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (ultra thin material)

### –ü—Ä–æ—Ñ–∏–ª—å –∞—Ä—Ç–∏—Å—Ç–∞
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      –ë–ê–ù–ù–ï–† (220px)         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îÇ
‚îÇ  ‚îÇ AVA ‚îÇ                    ‚îÇ ‚Üê –ê–≤–∞—Ç–∞—Ä –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –±–∞–Ω–Ω–µ—Ä
‚îî‚îÄ‚îÄ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   
   –ò–º—è –∞—Ä—Ç–∏—Å—Ç–∞
   @username
   
   –û–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ç–∏—Å—Ç–∞...
   
   –ê–õ–¨–ë–û–ú–´
   [–ê–ª—å–±–æ–º 1] [–ê–ª—å–±–æ–º 2] [–ê–ª—å–±–æ–º 3] ‚Üí
   
   –¢–†–ï–ö–ò
   üéµ –¢—Ä–µ–∫ 1
   üéµ –¢—Ä–µ–∫ 2
   üéµ –¢—Ä–µ–∫ 3
```

## üîß API Endpoints –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `POST /api/auth/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/auth/login` - –≤—Ö–æ–¥
- `POST /api/auth/refresh` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- `GET /api/me` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

### –ê—Ä—Ç–∏—Å—Ç—ã
- `POST /api/artists/auth/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∞—Ä—Ç–∏—Å—Ç–∞
- `POST /api/artists/auth/login` - –≤—Ö–æ–¥ –∞—Ä—Ç–∏—Å—Ç–∞
- `GET /api/artists/me/profile` - –º–æ–π –ø—Ä–æ—Ñ–∏–ª—å
- `PUT /api/artists/me/profile` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- `GET /api/artists/:id/profile` - –ø—É–±–ª–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å

### –ö–æ–Ω—Ç–µ–Ω—Ç
- `GET /api/home` - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `GET /api/search?q=...&genre=...&artistId=...` - –ø–æ–∏—Å–∫
- `GET /api/albums/:id` - –¥–µ—Ç–∞–ª–∏ –∞–ª—å–±–æ–º–∞
- `GET /api/tracks/:id/stream` - —Å—Ç—Ä–∏–º–∏–Ω–≥ —Ç—Ä–µ–∫–∞

### –ü–ª–µ–π–ª–∏—Å—Ç—ã
- `GET /api/playlists` - —Å–ø–∏—Å–æ–∫ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤
- `POST /api/playlists` - —Å–æ–∑–¥–∞—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç
- `POST /api/playlists/:id/tracks` - –¥–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–∫
- `DELETE /api/playlists/:id/tracks/:trackId` - —É–¥–∞–ª–∏—Ç—å —Ç—Ä–µ–∫

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- iOS 16+
- Swift 5.9+
- Xcode 14+

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Xcode

1. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π SwiftUI App –ø—Ä–æ–µ–∫—Ç**
2. **–ó–∞–º–µ–Ω–∏—Ç–µ —Ñ–∞–π–ª** –Ω–∞ `WFLYApp.swift`
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Background Modes**:
   - Signing & Capabilities ‚Üí + Capability ‚Üí Background Modes
   - –í–∫–ª—é—á–∏—Ç–µ "Audio, AirPlay, and Picture in Picture"
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ URL —Å–µ—Ä–≤–µ—Ä–∞** –≤ `AppConfig`:
   ```swift
   static let httpBase = URL(string: "https://flip.wfly.me:7412")!
   ```
5. **–°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ** –Ω–∞ —Å–∏–º—É–ª—è—Ç–æ—Ä–µ –∏–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

### Info.plist (–¥–ª—è HTTPS)
```xml
<key>NSAppTransportSecurity</key>
<dict>
    <key>NSAllowsArbitraryLoads</key>
    <false/>
</dict>
```

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏—á–∏

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- [x] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [x] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –∞—Ä—Ç–∏—Å—Ç–æ–≤
- [x] –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Å–µ–∫—Ü–∏—è–º–∏
- [x] –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ (—Ç–µ–∫—Å—Ç + –∂–∞–Ω—Ä)
- [x] –ü—Ä–æ—Ñ–∏–ª–∏ –∞—Ä—Ç–∏—Å—Ç–æ–≤ —Å –±–∞–Ω–Ω–µ—Ä–æ–º –∏ –∞–≤–∞—Ç–∞—Ä–æ–º
- [x] –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–ª—å–±–æ–º–æ–≤
- [x] –ü–ª–µ–π–ª–∏—Å—Ç—ã
- [x] –°—Ç—Ä–∏–º–∏–Ω–≥ –º—É–∑—ã–∫–∏ —Å Range support
- [x] –§–æ–Ω–æ–≤–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
- [x] Lock Screen controls
- [x] WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è now_playing
- [x] Keychain –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤

### üé® UI/UX –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω
- –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã
- Haptic feedback
- Gesture-based mini player
- –°—Ç–µ–∫–ª—è–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
- –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏

## üìù –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è"
2. –í–æ–π–¥–∏—Ç–µ —Å email –∏ –ø–∞—Ä–æ–ª–µ–º
3. –°–ª—É—à–∞–π—Ç–µ –º—É–∑—ã–∫—É, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã
4. –ò—â–∏—Ç–µ —Ç—Ä–µ–∫–∏ –∏ –∞—Ä—Ç–∏—Å—Ç–æ–≤

### –î–ª—è –∞—Ä—Ç–∏—Å—Ç–æ–≤
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ "–ê—Ä—Ç–∏—Å—Ç –†–µ–≥"
2. –í–æ–π–¥–∏—Ç–µ —Å username –∏ –ø–∞—Ä–æ–ª–µ–º
3. –£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º –ø—Ä–æ—Ñ–∏–ª–µ–º
4. –î–æ–±–∞–≤–ª—è–π—Ç–µ –±–∞–Ω–Ω–µ—Ä –∏ –∞–≤–∞—Ç–∞—Ä —á–µ—Ä–µ–∑ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
5. –í–∞—à –∫–æ–Ω—Ç–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `server.js` - —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å —Å –ø–æ–ª–Ω—ã–º API
- `README_FEATURES.md` - –æ–ø–∏—Å–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π —Å–µ—Ä–≤–µ—Ä–∞

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (—Ç—Ä–µ–∫–æ–≤, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä–Ω–æ–µ API –∏–ª–∏ CLI
- –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤
- –û—á–µ—Ä–µ–¥—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ (prev/next –∑–∞–≥–ª—É—à–∫–∏)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è
–ü—Ä–æ–µ–∫—Ç WFLY Music
